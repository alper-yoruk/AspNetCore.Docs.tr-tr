---
title: ASP.NET Core 3,1 ' den 5,0 ' e geçiş yapın
author: scottaddie
description: ASP.NET Core 3,1 projesini ASP.NET Core 5,0 ' e geçirmeyi öğrenin.
ms.author: scaddie
ms.custom: mvc
ms.date: 12/02/2020
no-loc:
- appsettings.json
- ASP.NET Core Identity
- cookie
- Cookie
- Blazor
- Blazor Server
- Blazor WebAssembly
- Identity
- Let's Encrypt
- Razor
- SignalR
uid: migration/31-to-50
ms.openlocfilehash: 397a93f9edb2ab238576d50d8eb71464441b4733
ms.sourcegitcommit: 04a404a9655c59ad1ea02aff5d399ae1b833ad6a
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 01/03/2021
ms.locfileid: "97854580"
---
# <a name="migrate-from-aspnet-core-31-to-50"></a><span data-ttu-id="5f0cd-103">ASP.NET Core 3,1 ' den 5,0 ' e geçiş yapın</span><span class="sxs-lookup"><span data-stu-id="5f0cd-103">Migrate from ASP.NET Core 3.1 to 5.0</span></span>

<span data-ttu-id="5f0cd-104">[Scott Ade](https://github.com/scottaddie) tarafından</span><span class="sxs-lookup"><span data-stu-id="5f0cd-104">By [Scott Addie](https://github.com/scottaddie)</span></span>

<span data-ttu-id="5f0cd-105">Bu makalede, mevcut bir ASP.NET Core 3,1 projesinin ASP.NET Core 5,0 ' e nasıl güncelleştirilmesi açıklanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-105">This article explains how to update an existing ASP.NET Core 3.1 project to ASP.NET Core 5.0.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="5f0cd-106">Ön koşullar</span><span class="sxs-lookup"><span data-stu-id="5f0cd-106">Prerequisites</span></span>

# <a name="visual-studio"></a>[<span data-ttu-id="5f0cd-107">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="5f0cd-107">Visual Studio</span></span>](#tab/visual-studio)

[!INCLUDE[](~/includes/net-core-prereqs-vs-5.0.md)]

# <a name="visual-studio-code"></a>[<span data-ttu-id="5f0cd-108">Visual Studio Code</span><span class="sxs-lookup"><span data-stu-id="5f0cd-108">Visual Studio Code</span></span>](#tab/visual-studio-code)

[!INCLUDE[](~/includes/net-core-prereqs-vsc-5.0.md)]

# <a name="visual-studio-for-mac"></a>[<span data-ttu-id="5f0cd-109">Mac için Visual Studio</span><span class="sxs-lookup"><span data-stu-id="5f0cd-109">Visual Studio for Mac</span></span>](#tab/visual-studio-mac)

[!INCLUDE[](~/includes/net-core-prereqs-mac-5.0.md)]

---

## <a name="update-net-core-sdk-version-in-globaljson"></a><span data-ttu-id="5f0cd-110">global.jsüzerinde .NET Core SDK sürümü Güncelleştir</span><span class="sxs-lookup"><span data-stu-id="5f0cd-110">Update .NET Core SDK version in global.json</span></span>

<span data-ttu-id="5f0cd-111">Belirli bir .NET Core SDK sürümünü hedeflemek için dosyadaki bir [global.js](/dotnet/core/tools/global-json) kullanıyorsanız, `version` özelliği yüklü olan .NET 5,0 SDK sürümü olarak güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-111">If you rely upon a [global.json](/dotnet/core/tools/global-json) file to target a specific .NET Core SDK version, update the `version` property to the .NET 5.0 SDK version that's installed.</span></span> <span data-ttu-id="5f0cd-112">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-112">For example:</span></span>

```diff
{
  "sdk": {
-    "version": "3.1.200"
+    "version": "5.0.100"
  }
}
```

## <a name="update-the-target-framework"></a><span data-ttu-id="5f0cd-113">Hedef çerçeveyi güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="5f0cd-113">Update the target framework</span></span>

<span data-ttu-id="5f0cd-114">Blazor WebAssemblyProjeyi güncelleştiriyorsanız [ Blazor WebAssembly projeleri Güncelleştir](#update-blazor-webassembly-projects) bölümüne atlayın.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-114">If updating a Blazor WebAssembly project, skip to the [Update Blazor WebAssembly projects](#update-blazor-webassembly-projects) section.</span></span> <span data-ttu-id="5f0cd-115">Diğer ASP.NET Core proje türleri için proje dosyasının [hedef Framework bilinen adını (tfd)](/dotnet/standard/frameworks) şu şekilde güncelleştirin `net5.0` :</span><span class="sxs-lookup"><span data-stu-id="5f0cd-115">For any other ASP.NET Core project type, update the project file's [Target Framework Moniker (TFM)](/dotnet/standard/frameworks) to `net5.0`:</span></span>

```diff
<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
-    <TargetFramework>netcoreapp3.1</TargetFramework>
+    <TargetFramework>net5.0</TargetFramework>
  </PropertyGroup>

</Project>
```

## <a name="changes-to-no-locblazor-app-routing-logic-in-501"></a><span data-ttu-id="5f0cd-116">Blazor5.0.1 içinde uygulama yönlendirme mantığındaki değişiklikler</span><span class="sxs-lookup"><span data-stu-id="5f0cd-116">Changes to Blazor app routing logic in 5.0.1</span></span>

<span data-ttu-id="5f0cd-117">ASP.NET Core 5.0.1 Patch sürümünde yol önceliği hesaplaması değişti.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-117">The computation of route precedence changed in the ASP.NET Core 5.0.1 patch release.</span></span> <span data-ttu-id="5f0cd-118">Bu, isteğe bağlı parametrelerle catch-all rotaları veya rotaları tanımladıysanız, sizi etkileyebilir.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-118">This might affect you if you've defined catch-all routes or routes with optional parameters.</span></span>

### <a name="old-behavior"></a><span data-ttu-id="5f0cd-119">Eski davranış</span><span class="sxs-lookup"><span data-stu-id="5f0cd-119">Old behavior</span></span>

<span data-ttu-id="5f0cd-120">ASP.NET Core 5.0.0 veya daha önceki bir sürümde, daha düşük önceliğe sahip yollar, gibi `{*slug}` daha yüksek önceliğe sahip rotalardan önce eşleştirilir `/customer/{id}` .</span><span class="sxs-lookup"><span data-stu-id="5f0cd-120">With the prior behavior in ASP.NET Core 5.0.0 or earlier, routes with lower precedence, such as `{*slug}`, are matched before routes with higher precedence, such as `/customer/{id}`.</span></span>

### <a name="new-behavior"></a><span data-ttu-id="5f0cd-121">Yeni davranış</span><span class="sxs-lookup"><span data-stu-id="5f0cd-121">New behavior</span></span>

<span data-ttu-id="5f0cd-122">ASP.NET Core 5.0.1 veya üzeri yeni davranış, Framework 'ün her bir kesim için yol önceliğini hesapladığı ve yalnızca ikinci bir ölçüt olarak ayırmak için yol uzunluğunu kullandığı ASP.NET Core uygulamalarda tanımlanan yönlendirme davranışıyla daha yakından eşleşir.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-122">The new behavior in ASP.NET Core 5.0.1 or later more closely matches the routing behavior defined in ASP.NET Core apps, where the framework computes and establishes the route precedence for each segment first and only uses the length of the route to break ties as a secondary criteria.</span></span>

### <a name="reason-for-change"></a><span data-ttu-id="5f0cd-123">Değişiklik nedeni</span><span class="sxs-lookup"><span data-stu-id="5f0cd-123">Reason for change</span></span>

<span data-ttu-id="5f0cd-124">Hedef Blazor yönlendirme sisteminin, yönlendirme tarafından desteklenen özelliklerin alt kümesi için ASP.NET Core yönlendirme sistemiyle aynı şekilde davranması nedeniyle, özgün davranış uygulamada bir hata olarak kabul edilir Blazor .</span><span class="sxs-lookup"><span data-stu-id="5f0cd-124">The original behavior is considered a bug in the implementation because our goal is for the Blazor routing system to behave in the same way as the ASP.NET Core routing system for the subset of features supported by Blazor routing.</span></span>

### <a name="recommended-action"></a><span data-ttu-id="5f0cd-125">Önerilen eylem</span><span class="sxs-lookup"><span data-stu-id="5f0cd-125">Recommended action</span></span>

<span data-ttu-id="5f0cd-126">`PreferExactMatches` `Router` `App.razor` Doğru davranışı kabul etmek için özniteliği dosyadaki bileşene ekleyin:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-126">Add the `PreferExactMatches` attribute to the `Router` component in the `App.razor` file to opt into the correct behavior:</span></span>

```razor
<Router AppAssembly="@typeof(Program).Assembly" PreferExactMatches="@true">
```

<span data-ttu-id="5f0cd-127">`PreferExactMatches`Olarak ayarlandığında `@true` , rota eşleştirme joker karakterlerle tam eşleşmeler tercih eder.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-127">When `PreferExactMatches` is set to `@true`, route matching prefers exact matches over wildcards.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="5f0cd-128">Tüm uygulamalar açıkça olarak ayarlanmalıdır `PreferExactMatches` `@true` .</span><span class="sxs-lookup"><span data-stu-id="5f0cd-128">All apps should explicitly set `PreferExactMatches` to `@true`.</span></span>
>
> <span data-ttu-id="5f0cd-129">Seçeneği varsayılan olarak, seçeneğinin ayarı olarak ayarlama `false` veya bırakma özelliği, `false` *yalnızca geriye dönük uyumluluk için sağlanır*.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-129">The ability to set the option to `false` or leave it unset, which defaults the option to `false`, *is only provided for backward compatibility*.</span></span>
>
> <span data-ttu-id="5f0cd-130">.NET 6 yayınlandığında, yönlendirici her zaman tam eşleşmeleri tercih eder ve `PreferExactMatches` seçenek kullanılamaz.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-130">When .NET 6 is released, the router will always prefer exact matches, and the `PreferExactMatches` option won't be available.</span></span>

## <a name="update-no-locblazor-webassembly-and-no-locblazor-server-projects"></a><span data-ttu-id="5f0cd-131">Güncelleştirme Blazor WebAssembly ve Blazor Server Projeler</span><span class="sxs-lookup"><span data-stu-id="5f0cd-131">Update Blazor WebAssembly and Blazor Server projects</span></span>

<span data-ttu-id="5f0cd-132">*Bu bölümdeki kılavuz, hem Blazor barındırma modelleri için geçerlidir. Bu bölümün takip eden bölümler, barındırma modellerini ve uygulama türlerini barındırmak için ek rehberlik sağlar. İlgili tüm bölümlerden uygulamanıza kılavuzluk uygulayın.*</span><span class="sxs-lookup"><span data-stu-id="5f0cd-132">*The guidance in this section applies to both Blazor hosting models. Sections following this section provide additional guidance specific to hosting models and app types. Apply the guidance from all relevant sections to your app.*</span></span>

1. <span data-ttu-id="5f0cd-133">`wwwroot/index.html`Bir Blazor WebAssembly uygulamada veya `Pages/_Host.cshtml` bir Blazor Server uygulamada, `<link>` stiller için öğesine bir öğesi ekleyin `<head>` .</span><span class="sxs-lookup"><span data-stu-id="5f0cd-133">In `wwwroot/index.html` of a Blazor WebAssembly app or the `Pages/_Host.cshtml` of a Blazor Server app, add a `<link>` element to the `<head>` element for styles.</span></span> <span data-ttu-id="5f0cd-134">Aşağıdaki `<link>` öğe `href` öznitelik değerlerinde yer tutucu, `{ASSEMBLY NAME}` uygulamanın derleme adıdır.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-134">In the following `<link>` element `href` attribute values, the placeholder `{ASSEMBLY NAME}` is the app's assembly name.</span></span>

    ```diff
    +<link href="{ASSEMBLY NAME}.styles.css" rel="stylesheet" />
    ```
    
    <span data-ttu-id="5f0cd-135">Tek başına Blazor WebAssembly veya Blazor Server örnek:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-135">Standalone Blazor WebAssembly or Blazor Server example:</span></span>
    
    ```diff
    +<link href="BlazorSample.styles.css" rel="stylesheet" />
    ```

    <span data-ttu-id="5f0cd-136">*`Client`* barındırılan Blazor WebAssembly çözüm örneği projesi:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-136">*`Client`* project of a hosted Blazor WebAssembly solution example:</span></span>
    
    ```diff
    +<link href="BlazorSample.Client.styles.css" rel="stylesheet" />
    ```

1. <span data-ttu-id="5f0cd-137">`_Imports.razor` [Bileşen Sanallaştırması](xref:blazor/components/virtualization)için uygulamanın dosyasına yeni bir ad alanı ekleyin <xref:Microsoft.AspNetCore.Components.Web.Virtualization?displayProperty=fullName> .</span><span class="sxs-lookup"><span data-stu-id="5f0cd-137">Include a new namespace in the app's `_Imports.razor` file for [component virtualization](xref:blazor/components/virtualization), <xref:Microsoft.AspNetCore.Components.Web.Virtualization?displayProperty=fullName>.</span></span> <span data-ttu-id="5f0cd-138">Aşağıdaki `_Imports.razor` dosyalar, proje şablonlarından oluşturulan uygulamalardaki varsayılan ad alanlarını gösterir Blazor .</span><span class="sxs-lookup"><span data-stu-id="5f0cd-138">The following `_Imports.razor` files show the default namespaces in apps generated from the Blazor project templates.</span></span> <span data-ttu-id="5f0cd-139">Yer tutucu, `{ASSEMBLY NAME}` uygulamanın derleme adıdır.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-139">The placeholder `{ASSEMBLY NAME}` is the app's assembly name.</span></span>

   <span data-ttu-id="5f0cd-140">Blazor WebAssembly (`_Imports.razor`):</span><span class="sxs-lookup"><span data-stu-id="5f0cd-140">Blazor WebAssembly (`_Imports.razor`):</span></span>
   
   ```razor
   @using System.Net.Http
   @using System.Net.Http.Json
   @using Microsoft.AspNetCore.Components.Forms
   @using Microsoft.AspNetCore.Components.Routing
   @using Microsoft.AspNetCore.Components.Web
   @using Microsoft.AspNetCore.Components.Web.Virtualization
   @using Microsoft.AspNetCore.Components.WebAssembly.Http
   @using Microsoft.JSInterop
   @using {ASSEMBLY NAME}
   @using {ASSEMBLY NAME}.Shared
   ```

   <span data-ttu-id="5f0cd-141">Blazor Server (`_Imports.razor`):</span><span class="sxs-lookup"><span data-stu-id="5f0cd-141">Blazor Server (`_Imports.razor`):</span></span>
   
   ```razor
   @using System.Net.Http
   @using Microsoft.AspNetCore.Authorization
   @using Microsoft.AspNetCore.Components.Authorization
   @using Microsoft.AspNetCore.Components.Forms
   @using Microsoft.AspNetCore.Components.Routing
   @using Microsoft.AspNetCore.Components.Web
   @using Microsoft.AspNetCore.Components.Web.Virtualization
   @using Microsoft.JSInterop
   @using {ASSEMBLY NAME}
   @using {ASSEMBLY NAME}.Shared
   ```
   
1. <span data-ttu-id="5f0cd-142">`MainLayout`Bileşeninde ( `Shared/MainLayout.razor` ), bileşenin HTML işaretlemesini, `<div>` özniteliği olarak ayarlanmış bir öğeyle çevreleyin `class` `page` :</span><span class="sxs-lookup"><span data-stu-id="5f0cd-142">In the `MainLayout` component (`Shared/MainLayout.razor`), surround the component's HTML markup with a `<div>` element that has a `class` attribute set to `page`:</span></span>

    ```razor
    <div class="page">
    
        ...
        
    </div>
    ```
    
1. <span data-ttu-id="5f0cd-143">Aşağıdaki dosyaları `Shared` klasörüne ekleyin:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-143">Add the following files to the `Shared` folder:</span></span>

    <span data-ttu-id="5f0cd-144">`MainLayout.razor.css`:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-144">`MainLayout.razor.css`:</span></span>
    
    ```css
    .page {
        position: relative;
        display: flex;
        flex-direction: column;
    }

    .main {
        flex: 1;
    }

    .sidebar {
        background-image: linear-gradient(180deg, rgb(5, 39, 103) 0%, #3a0647 70%);
    }

    .top-row {
        background-color: #f7f7f7;
        border-bottom: 1px solid #d6d5d5;
        justify-content: flex-end;
        height: 3.5rem;
        display: flex;
        align-items: center;
    }

        .top-row ::deep a, .top-row .btn-link {
            white-space: nowrap;
            margin-left: 1.5rem;
        }

        .top-row a:first-child {
            overflow: hidden;
            text-overflow: ellipsis;
        }

    @media (max-width: 767.98px) {
        .top-row:not(.auth) {
            display: none;
        }

        .top-row.auth {
            justify-content: space-between;
        }

        .top-row a, .top-row .btn-link {
            margin-left: 0;
        }
    }

    @media (min-width: 768px) {
        .page {
            flex-direction: row;
        }

        .sidebar {
            width: 250px;
            height: 100vh;
            position: sticky;
            top: 0;
        }

        .top-row {
            position: sticky;
            top: 0;
            z-index: 1;
        }

        .main > div {
            padding-left: 2rem !important;
            padding-right: 1.5rem !important;
        }
    }
    ```
    
    <span data-ttu-id="5f0cd-145">`NavMenu.razor.css`:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-145">`NavMenu.razor.css`:</span></span>
    
    ```css
    .navbar-toggler {
        background-color: rgba(255, 255, 255, 0.1);
    }

    .top-row {
        height: 3.5rem;
        background-color: rgba(0,0,0,0.4);
    }

    .navbar-brand {
        font-size: 1.1rem;
    }

    .oi {
        width: 2rem;
        font-size: 1.1rem;
        vertical-align: text-top;
        top: -2px;
    }

    .nav-item {
        font-size: 0.9rem;
        padding-bottom: 0.5rem;
    }

        .nav-item:first-of-type {
            padding-top: 1rem;
        }

        .nav-item:last-of-type {
            padding-bottom: 1rem;
        }

        .nav-item ::deep a {
            color: #d7d7d7;
            border-radius: 4px;
            height: 3rem;
            display: flex;
            align-items: center;
            line-height: 3rem;
        }

    .nav-item ::deep a.active {
        background-color: rgba(255,255,255,0.25);
        color: white;
    }

    .nav-item ::deep a:hover {
        background-color: rgba(255,255,255,0.1);
        color: white;
    }

    @media (min-width: 768px) {
        .navbar-toggler {
            display: none;
        }

        .collapse {
            /* Never collapse the sidebar for wide screens */
            display: block;
        }
    }
    ```

1. <span data-ttu-id="5f0cd-146">Uygulamanın `wwwroot/css/app.css` Blazor WebAssembly veya bir uygulama dosyasının en son temel dosyası `wwwroot/css/site.css` Blazor Server aşağıdaki stilleri içerir.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-146">The latest base `wwwroot/css/app.css` file of a Blazor WebAssembly app or `wwwroot/css/site.css` file of a Blazor Server app includes the following styles.</span></span> <span data-ttu-id="5f0cd-147">Aşağıdaki stilleri ve uygulamaya eklemiş olduğunuz ek stilleri kaldırın.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-147">Remove extra styles leaving the following styles and any that you've added to the app.</span></span>

    <span data-ttu-id="5f0cd-148">Aşağıdaki stil sayfası yalnızca temel stilleri içerir ve geliştirici tarafından eklenen özel **stilleri içermez:**</span><span class="sxs-lookup"><span data-stu-id="5f0cd-148">The following stylesheet only includes base styles and does **not** include custom styles added by the developer:</span></span>
   
    ```css
    @import url('open-iconic/font/css/open-iconic-bootstrap.min.css');

    html, body {
        font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
    }

    a, .btn-link {
        color: #0366d6;
    }

    .btn-primary {
        color: #fff;
        background-color: #1b6ec2;
        border-color: #1861ac;
    }

    .content {
        padding-top: 1.1rem;
    }

    .valid.modified:not([type=checkbox]) {
        outline: 1px solid #26b050;
    }

    .invalid {
        outline: 1px solid red;
    }

    .validation-message {
        color: red;
    }

    #blazor-error-ui {
        background: lightyellow;
        bottom: 0;
        box-shadow: 0 -1px 2px rgba(0, 0, 0, 0.2);
        display: none;
        left: 0;
        padding: 0.6rem 1.25rem 0.7rem 1.25rem;
        position: fixed;
        width: 100%;
        z-index: 1000;
    }

    #blazor-error-ui .dismiss {
        cursor: pointer;
        position: absolute;
        right: 0.75rem;
        top: 0.5rem;
    }
    ```

## <a name="update-no-locblazor-webassembly-projects"></a><span data-ttu-id="5f0cd-149">Blazor WebAssemblyProjeleri Güncelleştir</span><span class="sxs-lookup"><span data-stu-id="5f0cd-149">Update Blazor WebAssembly projects</span></span>

<span data-ttu-id="5f0cd-150">Önceki [güncelleştirme Blazor WebAssembly ve Blazor Server Projeler](#update-blazor-webassembly-and-blazor-server-projects) bölümündeki yönergeleri izleyin.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-150">Follow the guidance in the preceding [Update Blazor WebAssembly and Blazor Server projects](#update-blazor-webassembly-and-blazor-server-projects) section.</span></span>

<span data-ttu-id="5f0cd-151">Barındırılan bir Blazor WebAssembly çözümün projesi dahil olmak üzere, proje *`Client`* Blazor dosyasında aşağıdaki değişiklikleri uygulayın:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-151">For a Blazor WebAssembly project, including the *`Client`* project of a hosted Blazor solution, apply the following changes to the project file:</span></span>

1. <span data-ttu-id="5f0cd-152">SDK 'yı şuradan Güncelleştir `Microsoft.NET.Sdk.Web` `Microsoft.NET.Sdk.BlazorWebAssembly` :</span><span class="sxs-lookup"><span data-stu-id="5f0cd-152">Update the SDK from `Microsoft.NET.Sdk.Web` to `Microsoft.NET.Sdk.BlazorWebAssembly`:</span></span>

    ```diff
    - <Project Sdk="Microsoft.NET.Sdk.Web">
    + <Project Sdk="Microsoft.NET.Sdk.BlazorWebAssembly">
    ```
    
    > [!NOTE]
    > <span data-ttu-id="5f0cd-153">Bu güncelleştirme yalnızca tek başına Blazor WebAssembly Projeler ve *`Client`* barındırılan çözümlerin projeleri için geçerlidir Blazor .</span><span class="sxs-lookup"><span data-stu-id="5f0cd-153">This update only applies to standalone Blazor WebAssembly projects and the *`Client`* projects of hosted Blazor solutions.</span></span>

1. <span data-ttu-id="5f0cd-154">Aşağıdaki özellikleri güncelleştirin:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-154">Update the following properties:</span></span>

    ```diff
    <Project Sdk="Microsoft.NET.Sdk.BlazorWebAssembly">
    
      <PropertyGroup>
    -     <TargetFramework>netstandard2.1</TargetFramework>
    -     <RazorLangVersion>3.0</RazorLangVersion>
    +     <TargetFramework>net5.0</TargetFramework>
      </PropertyGroup>
    ```

1. <span data-ttu-id="5f0cd-155">[Microsoft. AspNetCore. components. WebAssembly. Build](https://www.nuget.org/packages/Microsoft.AspNetCore.Components.WebAssembly.Build)öğesine paket başvurusunu kaldırın:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-155">Remove the package reference to [Microsoft.AspNetCore.Components.WebAssembly.Build](https://www.nuget.org/packages/Microsoft.AspNetCore.Components.WebAssembly.Build):</span></span>

    ```diff
    <ItemGroup>
    -    <PackageReference Include="Microsoft.AspNetCore.Components.WebAssembly.Build" Version="3.2.1" PrivateAssets="all" />
    ```

1. <span data-ttu-id="5f0cd-156">Diğer paketleri en son sürümlerine güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-156">Update other packages to their latest versions.</span></span> <span data-ttu-id="5f0cd-157">En son sürümler [NuGet.org](https://www.nuget.org)adresinde bulunabilir.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-157">The latest versions can be found at [NuGet.org](https://www.nuget.org).</span></span>

1. <span data-ttu-id="5f0cd-158">İçinde `wwwroot/index.html` , `App` bileşeni öğesine kümesi olan bir öğeye yükleyen öğeyi değiştirin `<div>` `id` `app` :</span><span class="sxs-lookup"><span data-stu-id="5f0cd-158">In `wwwroot/index.html`, change the element that loads the `App` component to a `<div>` element with an `id` set to `app`:</span></span>
    
    ```diff
    -<app>Loading...</app>
    +<div id="app">Loading...</div>
    ```
    
1. <span data-ttu-id="5f0cd-159">İçinde `Program.Main` ( `Program.cs` ):</span><span class="sxs-lookup"><span data-stu-id="5f0cd-159">In `Program.Main` (`Program.cs`):</span></span>

   * <span data-ttu-id="5f0cd-160">`<app>`Öğesine bir karma ekleyerek öğenin başvurusunu CSS seçiciyle değiştirin `#` .</span><span class="sxs-lookup"><span data-stu-id="5f0cd-160">Change the reference to the `<app>` element to a CSS selector by adding a hash `#` to it.</span></span>
   * <span data-ttu-id="5f0cd-161">`HttpClient`Kaydı kapsamlı olarak değiştirin.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-161">Change the `HttpClient` registration to scoped.</span></span>

    ```diff
    -builder.RootComponents.Add<App>("app");
    +builder.RootComponents.Add<App>("#app");
    
    -builder.Services.AddTransient(sp => new HttpClient 
    -    { BaseAddress = new Uri(builder.HostEnvironment.BaseAddress) });
    +builder.Services.AddScoped(sp => new HttpClient 
    +    { BaseAddress = new Uri(builder.HostEnvironment.BaseAddress) });
    ```

### <a name="standalone-no-locblazor-webassembly-app-with-microsoft-accounts"></a><span data-ttu-id="5f0cd-162">Blazor WebAssemblyMicrosoft hesaplarıyla tek başına uygulama</span><span class="sxs-lookup"><span data-stu-id="5f0cd-162">Standalone Blazor WebAssembly app with Microsoft Accounts</span></span>

<span data-ttu-id="5f0cd-163">Önceki [güncelleştirme Blazor WebAssembly ve Blazor Server Projeler](#update-blazor-webassembly-and-blazor-server-projects) ve [güncelleştirme Blazor WebAssembly projeleri](#update-blazor-webassembly-projects) bölümlerindeki yönergeleri izleyin.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-163">Follow the guidance in the preceding [Update Blazor WebAssembly and Blazor Server projects](#update-blazor-webassembly-and-blazor-server-projects) and [Update Blazor WebAssembly projects](#update-blazor-webassembly-projects) sections.</span></span>

<span data-ttu-id="5f0cd-164">Blazor WebAssemblyMicrosoft hesapları için Azure Active Directory (AAD) kullanmak üzere Azure Portal kayıtlı tek başına bir uygulama için:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-164">For a standalone Blazor WebAssembly app registered in the Azure portal to use Azure Active Directory (AAD) for Microsoft Accounts:</span></span>

* <span data-ttu-id="5f0cd-165">Uygulama `openid` ve `offline_access` kapsamları gerektirir:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-165">The app requires the `openid` and `offline_access` scopes:</span></span>

  ```csharp
  options.ProviderOptions.DefaultAccessTokenScopes.Add("openid");
  options.ProviderOptions.DefaultAccessTokenScopes.Add("offline_access");
  ```
  
* <span data-ttu-id="5f0cd-166">Azure portal uygulama kayıt **kimlik doğrulaması** dikey penceresinde:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-166">In the Azure portal app registration **Authentication** blade:</span></span>

  1. <span data-ttu-id="5f0cd-167">**Web** platformu yapılandırmasını kaldırın.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-167">Remove the **Web** platform configuration.</span></span>
  1. <span data-ttu-id="5f0cd-168">Uygulamanın yeniden yönlendirme URI 'SI ile **tek sayfalı bir uygulama** platformu yapılandırması ekleyin.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-168">Add a **Single-page application** platform configuration with the app's redirect URI.</span></span>
  1. <span data-ttu-id="5f0cd-169">**Erişim belirteçleri** ve **Kimlik belirteçleri** için **örtük izni** devre dışı bırakın.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-169">Disable **Implicit grant** for **Access tokens** and **ID tokens**.</span></span>

<span data-ttu-id="5f0cd-170">Daha fazla bilgi için bkz. <xref:blazor/security/webassembly/standalone-with-microsoft-accounts>.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-170">For more information, see <xref:blazor/security/webassembly/standalone-with-microsoft-accounts>.</span></span>

### <a name="standalone-no-locblazor-webassembly-app-with-azure-active-directory-aad"></a><span data-ttu-id="5f0cd-171">Blazor WebAssemblyAzure Active Directory (AAD) ile tek başına uygulama</span><span class="sxs-lookup"><span data-stu-id="5f0cd-171">Standalone Blazor WebAssembly app with Azure Active Directory (AAD)</span></span>

<span data-ttu-id="5f0cd-172">Önceki [güncelleştirme Blazor WebAssembly ve Blazor Server Projeler](#update-blazor-webassembly-and-blazor-server-projects) ve [güncelleştirme Blazor WebAssembly projeleri](#update-blazor-webassembly-projects) bölümlerindeki yönergeleri izleyin.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-172">Follow the guidance in the preceding [Update Blazor WebAssembly and Blazor Server projects](#update-blazor-webassembly-and-blazor-server-projects) and [Update Blazor WebAssembly projects](#update-blazor-webassembly-projects) sections.</span></span>

<span data-ttu-id="5f0cd-173">Blazor WebAssemblyAzure Active Directory (AAD) kullanmak üzere Azure Portal kayıtlı tek başına bir uygulama için:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-173">For a standalone Blazor WebAssembly app registered in the Azure portal to use Azure Active Directory (AAD):</span></span>

* <span data-ttu-id="5f0cd-174">Uygulama için kapsam gereklidir `https://graph.microsoft.com/User.Read` :</span><span class="sxs-lookup"><span data-stu-id="5f0cd-174">The app requires the `https://graph.microsoft.com/User.Read` scope:</span></span>

  ```csharp
  options.ProviderOptions.DefaultAccessTokenScopes
      .Add("https://graph.microsoft.com/User.Read");
  ```
  
* <span data-ttu-id="5f0cd-175">Azure portal uygulama kayıt **kimlik doğrulaması** dikey penceresinde:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-175">In the Azure portal app registration **Authentication** blade:</span></span>

  1. <span data-ttu-id="5f0cd-176">**Web** platformu yapılandırmasını kaldırın.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-176">Remove the **Web** platform configuration.</span></span>
  1. <span data-ttu-id="5f0cd-177">Uygulamanın yeniden yönlendirme URI 'SI ile **tek sayfalı bir uygulama** platformu yapılandırması ekleyin.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-177">Add a **Single-page application** platform configuration with the app's redirect URI.</span></span>
  1. <span data-ttu-id="5f0cd-178">**Erişim belirteçleri** ve **Kimlik belirteçleri** için **örtük izni** devre dışı bırakın.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-178">Disable **Implicit grant** for **Access tokens** and **ID tokens**.</span></span>
  
<span data-ttu-id="5f0cd-179">Daha fazla bilgi için bkz. <xref:blazor/security/webassembly/standalone-with-azure-active-directory>.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-179">For more information, see <xref:blazor/security/webassembly/standalone-with-azure-active-directory>.</span></span>

### <a name="standalone-no-locblazor-webassembly-app-with-azure-active-directory-aad-b2c"></a><span data-ttu-id="5f0cd-180">Blazor WebAssemblyAzure Active Directory (AAD) B2C ile tek başına uygulama</span><span class="sxs-lookup"><span data-stu-id="5f0cd-180">Standalone Blazor WebAssembly app with Azure Active Directory (AAD) B2C</span></span>

<span data-ttu-id="5f0cd-181">Önceki [güncelleştirme Blazor WebAssembly ve Blazor Server Projeler](#update-blazor-webassembly-and-blazor-server-projects) ve [güncelleştirme Blazor WebAssembly projeleri](#update-blazor-webassembly-projects) bölümlerindeki yönergeleri izleyin.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-181">Follow the guidance in the preceding [Update Blazor WebAssembly and Blazor Server projects](#update-blazor-webassembly-and-blazor-server-projects) and [Update Blazor WebAssembly projects](#update-blazor-webassembly-projects) sections.</span></span>

<span data-ttu-id="5f0cd-182">Blazor WebAssemblyAzure Active Directory (AAD) B2C 'yi kullanmak için Azure Portal kayıtlı tek başına bir uygulama için:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-182">For a standalone Blazor WebAssembly app registered in the Azure portal to use Azure Active Directory (AAD) B2C:</span></span>

* <span data-ttu-id="5f0cd-183">Uygulama `openid` ve `offline_access` kapsamları gerektirir:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-183">The app requires the `openid` and `offline_access` scopes:</span></span>

  ```csharp
  options.ProviderOptions.DefaultAccessTokenScopes.Add("openid");
  options.ProviderOptions.DefaultAccessTokenScopes.Add("offline_access");
  ```
  
* <span data-ttu-id="5f0cd-184">Azure portal uygulama kayıt **kimlik doğrulaması** dikey penceresinde:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-184">In the Azure portal app registration **Authentication** blade:</span></span>

  1. <span data-ttu-id="5f0cd-185">**Web** platformu yapılandırmasını kaldırın.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-185">Remove the **Web** platform configuration.</span></span>
  1. <span data-ttu-id="5f0cd-186">Uygulamanın yeniden yönlendirme URI 'SI ile **tek sayfalı bir uygulama** platformu yapılandırması ekleyin.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-186">Add a **Single-page application** platform configuration with the app's redirect URI.</span></span>
  1. <span data-ttu-id="5f0cd-187">**Erişim belirteçleri** ve **Kimlik belirteçleri** için **örtük izni** devre dışı bırakın.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-187">Disable **Implicit grant** for **Access tokens** and **ID tokens**.</span></span>

<span data-ttu-id="5f0cd-188">Daha fazla bilgi için bkz. <xref:blazor/security/webassembly/standalone-with-azure-active-directory-b2c>.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-188">For more information, see <xref:blazor/security/webassembly/standalone-with-azure-active-directory-b2c>.</span></span>

### <a name="hosted-no-locblazor-webassembly-app-with-azure-active-directory-aad-or-aad-b2c"></a><span data-ttu-id="5f0cd-189">Blazor WebAssemblyAzure Active Directory (AAD) veya AAD B2C ile barındırılan uygulama</span><span class="sxs-lookup"><span data-stu-id="5f0cd-189">Hosted Blazor WebAssembly app with Azure Active Directory (AAD) or AAD B2C</span></span>

<span data-ttu-id="5f0cd-190">Önceki [güncelleştirme Blazor WebAssembly ve Blazor Server Projeler](#update-blazor-webassembly-and-blazor-server-projects) ve [güncelleştirme Blazor WebAssembly projeleri](#update-blazor-webassembly-projects) bölümlerindeki yönergeleri izleyin.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-190">Follow the guidance in the preceding [Update Blazor WebAssembly and Blazor Server projects](#update-blazor-webassembly-and-blazor-server-projects) and [Update Blazor WebAssembly projects](#update-blazor-webassembly-projects) sections.</span></span>

<span data-ttu-id="5f0cd-191">*`Client`* Blazor Kullanıcı kimlik doğrulaması için AAD veya AAD B2C kullanan bir barındırılan çözümün uygulama kaydı, **tek sayfalı uygulama** Azure Apps platform yapılandırması kullanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-191">The *`Client`* app registration of a hosted Blazor solution that uses AAD or AAD B2C for user authentication should use a **Single-page application** Azure Apps platform configuration.</span></span>

<span data-ttu-id="5f0cd-192">Azure portal *`Client`* uygulama kayıt **kimlik doğrulaması** dikey penceresinde:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-192">In the Azure portal *`Client`* app registration **Authentication** blade:</span></span>

  1. <span data-ttu-id="5f0cd-193">**Web** platformu yapılandırmasını kaldırın.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-193">Remove the **Web** platform configuration.</span></span>
  1. <span data-ttu-id="5f0cd-194">Uygulamanın yeniden yönlendirme URI 'SI ile **tek sayfalı bir uygulama** platformu yapılandırması ekleyin.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-194">Add a **Single-page application** platform configuration with the app's redirect URI.</span></span>
  1. <span data-ttu-id="5f0cd-195">**Erişim belirteçleri** ve **Kimlik belirteçleri** için **örtük izni** devre dışı bırakın.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-195">Disable **Implicit grant** for **Access tokens** and **ID tokens**.</span></span>

<span data-ttu-id="5f0cd-196">Daha fazla bilgi için bkz:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-196">For more information, see:</span></span>

* <xref:blazor/security/webassembly/hosted-with-azure-active-directory>
* <xref:blazor/security/webassembly/hosted-with-azure-active-directory-b2c>

### <a name="update-the-server-project-of-a-hosted-no-locblazor-solution"></a><span data-ttu-id="5f0cd-197">Barındırılan bir çözümün sunucu projesini güncelleştirme Blazor</span><span class="sxs-lookup"><span data-stu-id="5f0cd-197">Update the Server project of a hosted Blazor solution</span></span>

<span data-ttu-id="5f0cd-198">Yukarıdaki bölümlerde bulunan yönergeleri izleyin:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-198">Follow the guidance in the preceding sections:</span></span>

* [<span data-ttu-id="5f0cd-199">Güncelleştirme Blazor WebAssembly ve Blazor Server Projeler</span><span class="sxs-lookup"><span data-stu-id="5f0cd-199">Update Blazor WebAssembly and Blazor Server projects</span></span>](#update-blazor-webassembly-and-blazor-server-projects)
* [<span data-ttu-id="5f0cd-200">Blazor WebAssemblyProjeleri Güncelleştir</span><span class="sxs-lookup"><span data-stu-id="5f0cd-200">Update Blazor WebAssembly projects</span></span>](#update-blazor-webassembly-projects)
* <span data-ttu-id="5f0cd-201">Azure Active Directory ile uygulamanın sağlayıcısına uygulanan Bölüm:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-201">The section that applies to the app's provider with Azure Active Directory:</span></span>
  * [<span data-ttu-id="5f0cd-202">Blazor WebAssemblyMicrosoft hesaplarıyla tek başına uygulama</span><span class="sxs-lookup"><span data-stu-id="5f0cd-202">Standalone Blazor WebAssembly app with Microsoft Accounts</span></span>](#standalone-blazor-webassembly-app-with-microsoft-accounts)
  * [<span data-ttu-id="5f0cd-203">Blazor WebAssemblyAzure Active Directory (AAD) ile tek başına uygulama</span><span class="sxs-lookup"><span data-stu-id="5f0cd-203">Standalone Blazor WebAssembly app with Azure Active Directory (AAD)</span></span>](#standalone-blazor-webassembly-app-with-azure-active-directory-aad)
  * [<span data-ttu-id="5f0cd-204">Blazor WebAssemblyAzure Active Directory (AAD) B2C ile tek başına uygulama</span><span class="sxs-lookup"><span data-stu-id="5f0cd-204">Standalone Blazor WebAssembly app with Azure Active Directory (AAD) B2C</span></span>](#standalone-blazor-webassembly-app-with-azure-active-directory-aad-b2c)

<span data-ttu-id="5f0cd-205">Barındırılan bir *`Server`* çözümün projesini, Blazor Bu makaledeki genel kılavuzdan sonra ASP.NET Core uygulama olarak güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-205">Update the *`Server`* project of a hosted Blazor solution as an ASP.NET Core app following the general guidance in this article.</span></span>

<span data-ttu-id="5f0cd-206">Ayrıca, *`Server`* Blazor WebAssembly Azure ACTIVE DIRECTORY (AAD) veya B2C ile istemci uygulamalarında kullanıcıların kimliğini doğrulayan projeler yeni Microsoft Identity v 2.0 paketlerini benimsemelidir:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-206">Additionally, *`Server`* projects that authenticate users to client Blazor WebAssembly apps with Azure Active Directory (AAD) or B2C should adopt new Microsoft Identity v2.0 packages:</span></span> 
  
<span data-ttu-id="5f0cd-207">AAD için:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-207">For AAD:</span></span>

```diff
-<PackageReference Include="Microsoft.AspNetCore.Authentication.AzureAD.UI" Version="..." />
+<PackageReference Include="Microsoft.Identity.Web" Version="{VERSION}" />
+<PackageReference Include="Microsoft.Identity.Web.UI" Version="{VERSION}" />
```

<span data-ttu-id="5f0cd-208">AAD B2C için:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-208">For AAD B2C:</span></span>

```diff
-<PackageReference Include="Microsoft.AspNetCore.Authentication.AzureADB2C.UI" Version="..." />
+<PackageReference Include="Microsoft.Identity.Web" Version="{VERSION}" />
+<PackageReference Include="Microsoft.Identity.Web.UI" Version="{VERSION}" />
```

<span data-ttu-id="5f0cd-209">Önceki paket başvuruları için `{VERSION}` NuGet.org adresindeki yer tutucular için paket sürümlerini saptayın:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-209">For the preceding package references, determine the package versions for the `{VERSION}` placeholders at NuGet.org:</span></span>

* [`Microsoft.Identity.Web`](https://www.nuget.org/packages/Microsoft.Identity.Web)
* [`Microsoft.Identity.Web.UI`](https://www.nuget.org/packages/Microsoft.Identity.Web.UI)

> [!NOTE]
> <span data-ttu-id="5f0cd-210">*`Server`* Barındırılan çözümde projenin SDK 'sı Blazor WebAssembly kalır `Microsoft.NET.Sdk.Web` :</span><span class="sxs-lookup"><span data-stu-id="5f0cd-210">The SDK of the *`Server`* project in a hosted Blazor WebAssembly solution remains `Microsoft.NET.Sdk.Web`:</span></span>
>
> ```xml
> <Project Sdk="Microsoft.NET.Sdk.Web">
> ```

<span data-ttu-id="5f0cd-211">Daha fazla bilgi için bkz:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-211">For more information, see:</span></span>

* <xref:blazor/security/webassembly/hosted-with-azure-active-directory>
* <xref:blazor/security/webassembly/hosted-with-azure-active-directory-b2c>

### <a name="clean-and-rebuild-the-solution"></a><span data-ttu-id="5f0cd-212">Çözümü Temizleme ve yeniden oluşturma</span><span class="sxs-lookup"><span data-stu-id="5f0cd-212">Clean and rebuild the solution</span></span>

<span data-ttu-id="5f0cd-213">Uygulamayı veya çözümü .NET 5 ' e geçirdikten sonra, uygulamayı veya çözümü temizleyin ve yeniden oluşturun.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-213">After migrating the app or solution to .NET 5, clean and rebuild the app or solution.</span></span> <span data-ttu-id="5f0cd-214">Paket uyumsuzlukları yeni paket başvuruları ve önbelleğe alınmış paketler arasında mevcutsa:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-214">If package incompatibilities exist between new package references and cached packages:</span></span>

1. <span data-ttu-id="5f0cd-215">Bir komut kabuğunda aşağıdaki komutu yürüterek NuGet paket önbelleklerini temizleyin [`dotnet nuget locals`](/dotnet/core/tools/dotnet-nuget-locals) :</span><span class="sxs-lookup"><span data-stu-id="5f0cd-215">Clear NuGet package caches by executing the following [`dotnet nuget locals`](/dotnet/core/tools/dotnet-nuget-locals) command in a command shell:</span></span>

   ```dotnetcli
   dotnet nuget locals --clear all
   ```
   
1. <span data-ttu-id="5f0cd-216">Uygulamayı veya çözümü temizleyin ve yeniden oluşturun.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-216">Clean and rebuild the app or solution.</span></span>

### <a name="troubleshoot"></a><span data-ttu-id="5f0cd-217">Sorun giderme</span><span class="sxs-lookup"><span data-stu-id="5f0cd-217">Troubleshoot</span></span>

<span data-ttu-id="5f0cd-218">Uygulamanız için geçerli olan güvenlik konusunun sonundaki *sorun giderme* kılavuzunu izleyin Blazor WebAssembly :</span><span class="sxs-lookup"><span data-stu-id="5f0cd-218">Follow the *Troubleshoot* guidance at the end of the Blazor WebAssembly security topic that applies to your app:</span></span>

<span data-ttu-id="5f0cd-219">Tek başına Blazor WebAssembly uygulamalar:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-219">Standalone Blazor WebAssembly apps:</span></span>

* [<span data-ttu-id="5f0cd-220">OıDC sağlayıcıları ve WebAssembly kimlik doğrulama kitaplığı için genel kılavuz</span><span class="sxs-lookup"><span data-stu-id="5f0cd-220">General guidance for OIDC providers and the WebAssembly Authentication Library</span></span>](xref:blazor/security/webassembly/standalone-with-authentication-library)
* [<span data-ttu-id="5f0cd-221">Microsoft Hesapları</span><span class="sxs-lookup"><span data-stu-id="5f0cd-221">Microsoft Accounts</span></span>](xref:blazor/security/webassembly/standalone-with-microsoft-accounts)
* [<span data-ttu-id="5f0cd-222">Azure Active Directory (AAD)</span><span class="sxs-lookup"><span data-stu-id="5f0cd-222">Azure Active Directory (AAD)</span></span>](xref:blazor/security/webassembly/standalone-with-azure-active-directory)
* [<span data-ttu-id="5f0cd-223">Azure Active Directory (AAD) B2C</span><span class="sxs-lookup"><span data-stu-id="5f0cd-223">Azure Active Directory (AAD) B2C</span></span>](xref:blazor/security/webassembly/standalone-with-azure-active-directory-b2c)

<span data-ttu-id="5f0cd-224">Barındırılan Blazor WebAssembly uygulamalar:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-224">Hosted Blazor WebAssembly apps:</span></span>

* [<span data-ttu-id="5f0cd-225">Azure Active Directory (AAD)</span><span class="sxs-lookup"><span data-stu-id="5f0cd-225">Azure Active Directory (AAD)</span></span>](xref:blazor/security/webassembly/hosted-with-azure-active-directory)
* [<span data-ttu-id="5f0cd-226">Azure Active Directory (AAD) B2C</span><span class="sxs-lookup"><span data-stu-id="5f0cd-226">Azure Active Directory (AAD) B2C</span></span>](xref:blazor/security/webassembly/hosted-with-azure-active-directory-b2c)
* [<span data-ttu-id="5f0cd-227">Identity Server</span><span class="sxs-lookup"><span data-stu-id="5f0cd-227">Identity Server</span></span>](xref:blazor/security/webassembly/hosted-with-identity-server)

### <a name="unauthorized-client-for-azure-active-directory-aad"></a><span data-ttu-id="5f0cd-228">Azure Active Directory için yetkisiz istemci (AAD)</span><span class="sxs-lookup"><span data-stu-id="5f0cd-228">Unauthorized client for Azure Active Directory (AAD)</span></span>

<span data-ttu-id="5f0cd-229">Blazor WebAssemblyKimlik doğrulaması IÇIN AAD kullanan bir uygulamayı yükselttikten sonra, Kullanıcı AAD ile oturum açtıktan sonra uygulamaya oturum açma geri aramasında aşağıdaki hatayı alabilirsiniz:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-229">After upgrading a Blazor WebAssembly app that uses AAD for authentication, you may receive the following error on the login callback to the app after the user signs in with AAD:</span></span>

> <span data-ttu-id="5f0cd-230">bilgi: Microsoft. AspNetCore. Authorization. DefaultAuthorizationService [2] yetkilendirmesi başarısız oldu.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-230">info: Microsoft.AspNetCore.Authorization.DefaultAuthorizationService[2] Authorization failed.</span></span> <span data-ttu-id="5f0cd-231">Bu gereksinimler karşılanmadı: DenyAnonymousAuthorizationRequirement: kimliği doğrulanmış bir kullanıcı gerektirir.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-231">These requirements were not met: DenyAnonymousAuthorizationRequirement: Requires an authenticated user.</span></span>

<span data-ttu-id="5f0cd-232">AAD 'den oturum açma geri çağırma hatası:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-232">Login callback error from AAD:</span></span>

* <span data-ttu-id="5f0cd-233">Hata: `unauthorized_client`</span><span class="sxs-lookup"><span data-stu-id="5f0cd-233">Error: `unauthorized_client`</span></span>
* <span data-ttu-id="5f0cd-234">Açıklaması `AADB2C90058: The provided application is not configured to allow public clients.`</span><span class="sxs-lookup"><span data-stu-id="5f0cd-234">Description: `AADB2C90058: The provided application is not configured to allow public clients.`</span></span>

<span data-ttu-id="5f0cd-235">Hatayı gidermek için:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-235">To resolve the error:</span></span>

1. <span data-ttu-id="5f0cd-236">Azure portal, [uygulamanın bildirimine](/azure/active-directory/develop/reference-app-manifest)erişin.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-236">In the Azure portal, access the [app's manifest](/azure/active-directory/develop/reference-app-manifest).</span></span>
1. <span data-ttu-id="5f0cd-237">[`allowPublicClient`](/azure/active-directory/develop/reference-app-manifest#allowpublicclient-attribute)Özniteliğini veya olarak ayarlayın `null` `true` .</span><span class="sxs-lookup"><span data-stu-id="5f0cd-237">Set the [`allowPublicClient`](/azure/active-directory/develop/reference-app-manifest#allowpublicclient-attribute) attribute to `null` or `true`.</span></span>

## <a name="update-a-no-locblazor-progressive-web-application-pwa"></a><span data-ttu-id="5f0cd-238">Aşamalı bir Blazor Web uygulamasını (PWA) güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="5f0cd-238">Update a Blazor Progressive Web Application (PWA)</span></span>

<span data-ttu-id="5f0cd-239">Aşağıdaki öğeyi PWA uygulamasının proje dosyasına ekleyin:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-239">Add the following item to the PWA app's project file:</span></span>

```xml
<ItemGroup>
  <ServiceWorker Include="wwwroot\service-worker.js" 
    PublishedContent="wwwroot\service-worker.published.js" />
</ItemGroup>
```

## <a name="update-no-locrazor-class-libraries-rcls"></a><span data-ttu-id="5f0cd-240">RazorSınıf kitaplıklarını güncelleştirme (RCLs)</span><span class="sxs-lookup"><span data-stu-id="5f0cd-240">Update Razor class libraries (RCLs)</span></span>

<span data-ttu-id="5f0cd-241">RazorASP.NET Core 5,0 kapsamında sunulan yeni API 'lerden veya özelliklerden yararlanmak için sınıf kitaplıklarını (RCLs) geçirin.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-241">Migrate Razor class libraries (RCLs) to take advantage of new APIs or features that are introduced as part of ASP.NET Core 5.0.</span></span> 

<span data-ttu-id="5f0cd-242">Bileşenleri hedefleyen bir RCL 'yi güncelleştirmek için:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-242">To update a RCL that targets components:</span></span>

1. <span data-ttu-id="5f0cd-243">Proje dosyasında aşağıdaki özellikleri güncelleştirin:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-243">Update the following properties in the project file:</span></span>

   ```diff
   <Project Sdk="Microsoft.NET.Sdk.Razor">
    
     <PropertyGroup>
   -     <TargetFramework>netstandard2.0</TargetFramework>
   -     <RazorLangVersion>3.0</RazorLangVersion>
   +     <TargetFramework>net5.0</TargetFramework>
     </PropertyGroup>
   ```

1. <span data-ttu-id="5f0cd-244">Diğer paketleri en son sürümlerine güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-244">Update other packages to their latest versions.</span></span> <span data-ttu-id="5f0cd-245">En son sürümler [NuGet.org](https://www.nuget.org)adresinde bulunabilir.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-245">The latest versions can be found at [NuGet.org](https://www.nuget.org).</span></span>

<span data-ttu-id="5f0cd-246">Bir RCL hedefleme MVC 'yi güncelleştirmek için proje dosyasında aşağıdaki özellikleri güncelleştirin:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-246">To update an RCL targeting MVC, update the following properties in the project file:</span></span>

```diff
<Project Sdk="Microsoft.NET.Sdk.Razor">

  <PropertyGroup>
-    <TargetFramework>netcoreapp3.1</TargetFramework>
+    <TargetFramework>net5.0</TargetFramework>
    <AddRazorSupportForMvc>true</AddRazorSupportForMvc>
  </PropertyGroup>
```

## <a name="update-package-references"></a><span data-ttu-id="5f0cd-247">Paket başvurularını Güncelleştir</span><span class="sxs-lookup"><span data-stu-id="5f0cd-247">Update package references</span></span>

<span data-ttu-id="5f0cd-248">Proje dosyasında, her bir [Microsoft. AspNetCore. \*](https://www.nuget.org/packages?q=Microsoft.AspNetCore.*), [Microsoft. entityframeworkcore. \*](https://www.nuget.org/packages?q=Microsoft.EntityFrameworkCore.*), [Microsoft. Extensions. \*](https://www.nuget.org/packages?q=Microsoft.Extensions.*)ve [System.Net.Http.Js](https://www.nuget.org/packages/System.Net.Http.Json) paket başvurusunun `Version` özniteliğinde 5.0.0 veya sonraki bir sürüme güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-248">In the project file, update each [Microsoft.AspNetCore.\*](https://www.nuget.org/packages?q=Microsoft.AspNetCore.*), [Microsoft.EntityFrameworkCore.\*](https://www.nuget.org/packages?q=Microsoft.EntityFrameworkCore.*), [Microsoft.Extensions.\*](https://www.nuget.org/packages?q=Microsoft.Extensions.*), and [System.Net.Http.Json](https://www.nuget.org/packages/System.Net.Http.Json) package reference's `Version` attribute to 5.0.0 or later.</span></span> <span data-ttu-id="5f0cd-249">Örneğin:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-249">For example:</span></span>

```diff
<ItemGroup>
-    <PackageReference Include="Microsoft.AspNetCore.JsonPatch" Version="3.1.6" />
-    <PackageReference Include="Microsoft.EntityFrameworkCore.Tools" Version="3.1.6">
-    <PackageReference Include="Microsoft.Extensions.Caching.Abstractions" Version="3.1.6" />
-    <PackageReference Include="System.Net.Http.Json" Version="3.2.1" />
+    <PackageReference Include="Microsoft.AspNetCore.JsonPatch" Version="5.0.0" />
+    <PackageReference Include="Microsoft.EntityFrameworkCore.Tools" Version="5.0.0">
+    <PackageReference Include="Microsoft.Extensions.Caching.Abstractions" Version="5.0.0" />
+    <PackageReference Include="System.Net.Http.Json" Version="5.0.0" />
</ItemGroup>
```

## <a name="update-docker-images"></a><span data-ttu-id="5f0cd-250">Docker görüntülerini güncelleştirme</span><span class="sxs-lookup"><span data-stu-id="5f0cd-250">Update Docker images</span></span>

<span data-ttu-id="5f0cd-251">Docker kullanan uygulamalar için *Dockerfile* `FROM` deyimlerinizi ve betikleri güncelleştirin.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-251">For apps using Docker, update your *Dockerfile* `FROM` statements and scripts.</span></span> <span data-ttu-id="5f0cd-252">ASP.NET Core 5,0 çalışma zamanını içeren bir temel görüntü kullanın.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-252">Use a base image that includes the ASP.NET Core 5.0 runtime.</span></span> <span data-ttu-id="5f0cd-253">`docker pull`ASP.NET Core 3,1 ve 5,0 arasındaki aşağıdaki komut farkını göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-253">Consider the following `docker pull` command difference between ASP.NET Core 3.1 and 5.0:</span></span>

```diff
- docker pull mcr.microsoft.com/dotnet/core/aspnet:3.1
+ docker pull mcr.microsoft.com/dotnet/aspnet:5.0
```

<span data-ttu-id="5f0cd-254">Ürün adı olarak ".NET" e taşıma kapsamında, Docker görüntüleri `mcr.microsoft.com/dotnet/core` depolardan öğesine taşınır `mcr.microsoft.com/dotnet` .</span><span class="sxs-lookup"><span data-stu-id="5f0cd-254">As part of the move to ".NET" as the product name, the Docker images moved from the `mcr.microsoft.com/dotnet/core` repositories to `mcr.microsoft.com/dotnet`.</span></span> <span data-ttu-id="5f0cd-255">Daha fazla bilgi için bkz. [DotNet/DotNet-Docker # 1939](https://github.com/dotnet/dotnet-docker/issues/1939).</span><span class="sxs-lookup"><span data-stu-id="5f0cd-255">For more information, see [dotnet/dotnet-docker#1939](https://github.com/dotnet/dotnet-docker/issues/1939).</span></span>

## <a name="model-binding-changes-in-aspnet-core-mvc-and-no-locrazor-pages"></a><span data-ttu-id="5f0cd-256">ASP.NET Core MVC ve sayfalarında model bağlama değişiklikleri Razor</span><span class="sxs-lookup"><span data-stu-id="5f0cd-256">Model binding changes in ASP.NET Core MVC and Razor Pages</span></span>

### <a name="datetime-values-are-model-bound-as-utc-times"></a><span data-ttu-id="5f0cd-257">DateTime değerleri UTC zamanları olarak modeldir</span><span class="sxs-lookup"><span data-stu-id="5f0cd-257">DateTime values are model bound as UTC times</span></span>

<span data-ttu-id="5f0cd-258">ASP.NET Core 3,1 ve önceki sürümlerde, `DateTime` değerler saat diliminin sunucu tarafından belirlendiği yerel saat olarak model bağlasıydı.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-258">In ASP.NET Core 3.1 and earlier, `DateTime` values were model-bound as local time, where the timezone was determined by the server.</span></span> <span data-ttu-id="5f0cd-259">`DateTime` Giriş biçimlendirme (JSON) ve değerleri ile sınırlı değerler `DateTimeOffset` UTC Timezones olarak bağlıydı.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-259">`DateTime` values bound from input formatting (JSON) and `DateTimeOffset` values were bound as UTC timezones.</span></span>

<span data-ttu-id="5f0cd-260">ASP.NET Core 5,0 ve üzeri sürümlerde, model bağlama `DateTime` DEĞERLERI UTC saat dilimiyle tutarlı bir şekilde bağlar.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-260">In ASP.NET Core 5.0 and later, model binding consistently binds `DateTime` values with the UTC timezone.</span></span>

<span data-ttu-id="5f0cd-261">Önceki davranışı sürdürmek için, `DateTimeModelBinderProvider` içindeki ' ı kaldırın `Startup.ConfigureServices` :</span><span class="sxs-lookup"><span data-stu-id="5f0cd-261">To retain the previous behavior, remove the `DateTimeModelBinderProvider` in `Startup.ConfigureServices`:</span></span>

```csharp
services.AddControllersWithViews(options => 
    options.ModelBinderProviders.RemoveType<DateTimeModelBinderProvider>());
```

### <a name="complexobjectmodelbinderprovider--complexobjectmodelbinder-replace-complextypemodelbinderprovider--complextypemodelbinder"></a><span data-ttu-id="5f0cd-262">ComplexObjectModelBinderProvider \ Complexobjectmodelciltçi Replace ComplexTypeModelBinderProvider \ Complextypemodelciltçi</span><span class="sxs-lookup"><span data-stu-id="5f0cd-262">ComplexObjectModelBinderProvider \ ComplexObjectModelBinder replace ComplexTypeModelBinderProvider \ ComplexTypeModelBinder</span></span>

<span data-ttu-id="5f0cd-263">Model bağlama [C# 9 kayıt türleri](/dotnet/csharp/whats-new/csharp-9#record-types)için destek eklemek üzere, <xref:Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider> Şu olur:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-263">To add support for model binding [C# 9 record types](/dotnet/csharp/whats-new/csharp-9#record-types), the <xref:Microsoft.AspNetCore.Mvc.ModelBinding.Binders.ComplexTypeModelBinderProvider> is:</span></span>

* <span data-ttu-id="5f0cd-264">Eski olarak açıklanmalıdır.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-264">Annotated as obsolete.</span></span>
* <span data-ttu-id="5f0cd-265">Artık varsayılan olarak kayıtlı değildir.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-265">No longer registered by default.</span></span>

<span data-ttu-id="5f0cd-266">Koleksiyonda bulunan öğesinin varlığına bağlı olan uygulamaların `ComplexTypeModelBinderProvider` `ModelBinderProviders` Yeni Ciltçi sağlayıcısına başvurması gerekir:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-266">Apps that rely on the presence of the `ComplexTypeModelBinderProvider` in the `ModelBinderProviders` collection need to reference the new binder provider:</span></span>

```diff
- var complexModelBinderProvider = options.ModelBinderProviders.OfType<ComplexTypeModelBinderProvider>();
+ var complexModelBinderProvider = options.ModelBinderProviders.OfType<ComplexObjectModelBinderProvider>();
```

## <a name="usedatabaseerrorpage-obsolete"></a><span data-ttu-id="5f0cd-267">UseDatabaseErrorPage artık kullanılmıyor</span><span class="sxs-lookup"><span data-stu-id="5f0cd-267">UseDatabaseErrorPage obsolete</span></span>

<span data-ttu-id="5f0cd-268">Bireysel kullanıcı hesapları için bir seçenek içeren ASP.NET Core 3,1 şablonları, öğesine bir çağrı oluşturur <xref:Microsoft.AspNetCore.Builder.DatabaseErrorPageExtensions.UseDatabaseErrorPage%2A> .</span><span class="sxs-lookup"><span data-stu-id="5f0cd-268">The ASP.NET Core 3.1 templates that include an option for individual user accounts generate a call to <xref:Microsoft.AspNetCore.Builder.DatabaseErrorPageExtensions.UseDatabaseErrorPage%2A>.</span></span> <span data-ttu-id="5f0cd-269">`UseDatabaseErrorPage` artık kullanımdan kalkmıştır ve `AddDatabaseDeveloperPageExceptionFilter` `UseMigrationsEndPoint` aşağıdaki kodda gösterildiği gibi ve bir birleşimiyle değiştirilmelidir:</span><span class="sxs-lookup"><span data-stu-id="5f0cd-269">`UseDatabaseErrorPage` is now obsolete and should be replaced with a combination of `AddDatabaseDeveloperPageExceptionFilter` and `UseMigrationsEndPoint`, as shown in the following code:</span></span>

```diff
public void ConfigureServices(IServiceCollection services)
{
    services.AddDbContext<ApplicationDbContext>(options =>
        options.UseSqlServer(
            Configuration.GetConnectionString("DefaultConnection")));
+   services.AddDatabaseDeveloperPageExceptionFilter();
    services.AddDefaultIdentity<IdentityUser>(options => options.SignIn.RequireConfirmedAccount = true)
        .AddEntityFrameworkStores<ApplicationDbContext>();
    services.AddRazorPages();
}

public void Configure(IApplicationBuilder app, IWebHostEnvironment env)
{
    if (env.IsDevelopment())
    {
        app.UseDeveloperExceptionPage();
+       app.UseMigrationsEndPoint();
-       app.UseDatabaseErrorPage();
    }
    else
    {
        app.UseExceptionHandler("/Error");
        app.UseHsts();
    }
```

<span data-ttu-id="5f0cd-270">Daha fazla bilgi için [Bu GitHub sorununa](https://github.com/dotnet/aspnetcore/issues/24987)bakın.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-270">For more information, see [this GitHub issue](https://github.com/dotnet/aspnetcore/issues/24987).</span></span>

## <a name="review-breaking-changes"></a><span data-ttu-id="5f0cd-271">Son değişiklikleri gözden geçir</span><span class="sxs-lookup"><span data-stu-id="5f0cd-271">Review breaking changes</span></span>

<span data-ttu-id="5f0cd-272">.NET Core 3,1 ' den .NET 5,0 ' ye son değişiklikler için, [sürüm 3,1 ' den 5,0 ' e geçiş Için Son değişiklikler](/dotnet/core/compatibility/3.1-5.0)konusuna bakın</span><span class="sxs-lookup"><span data-stu-id="5f0cd-272">For breaking changes from .NET Core 3.1 to .NET 5.0, see [Breaking changes for migration from version 3.1 to 5.0](/dotnet/core/compatibility/3.1-5.0).</span></span> <span data-ttu-id="5f0cd-273">ASP.NET Core ve Entity Framework Core listede de bulunur.</span><span class="sxs-lookup"><span data-stu-id="5f0cd-273">ASP.NET Core and Entity Framework Core are also included in the list.</span></span>
