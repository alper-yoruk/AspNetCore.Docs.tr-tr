---
title: ASP.NET Core Bölüm 6, denetleyici yöntemleri ve görünümleri
author: rick-anderson
description: 6. bölüm, ASP.NET Core MVC uygulamasına model ekleme
ms.author: riande
ms.date: 12/13/2018
no-loc:
- 'appsettings.json'
- 'ASP.NET Core Identity'
- 'cookie'
- 'Cookie'
- 'Blazor'
- 'Blazor Server'
- 'Blazor WebAssembly'
- 'Identity'
- "Let's Encrypt"
- 'Razor'
- 'SignalR'
uid: tutorials/first-mvc-app/controller-methods-views
ms.openlocfilehash: b4850821317b6907452793ef09194844c90c0137
ms.sourcegitcommit: ca34c1ac578e7d3daa0febf1810ba5fc74f60bbf
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 10/30/2020
ms.locfileid: "93050777"
---
# <a name="part-6-controller-methods-and-views-in-aspnet-core"></a><span data-ttu-id="7ce1b-103">ASP.NET Core Bölüm 6, denetleyici yöntemleri ve görünümleri</span><span class="sxs-lookup"><span data-stu-id="7ce1b-103">Part 6, controller methods and views in ASP.NET Core</span></span>

<span data-ttu-id="7ce1b-104">Gönderen [Rick Anderson](https://twitter.com/RickAndMSFT)</span><span class="sxs-lookup"><span data-stu-id="7ce1b-104">By [Rick Anderson](https://twitter.com/RickAndMSFT)</span></span>

<span data-ttu-id="7ce1b-105">Film uygulamasına iyi başladık, ancak sunu ideal değildir, örneğin, **ReleaseDate** iki sözcükten oluşmalıdır.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-105">We have a good start to the movie app, but the presentation isn't ideal, for example, **ReleaseDate** should be two words.</span></span>

![Dizin görünümü: Yayın tarihi bir sözcükdür (boşluk yok) ve her film yayın tarihi 12 saat içinde görüntülenir](working-with-sql/_static/m55.png)

<span data-ttu-id="7ce1b-107">*Modeller/film. cs* dosyasını açın ve vurgulanan satırları aşağıda gösterildiği gibi ekleyin:</span><span class="sxs-lookup"><span data-stu-id="7ce1b-107">Open the *Models/Movie.cs* file and add the highlighted lines shown below:</span></span>

[!code-csharp[](start-mvc/sample/MvcMovie22/Models/MovieDateFixed.cs?name=snippet_1&highlight=2,3,12-13,17)]

<span data-ttu-id="7ce1b-108">Sonraki öğreticide [veri ek açıklamalarını](/aspnet/mvc/overview/older-versions/mvc-music-store/mvc-music-store-part-6) ele aldık.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-108">We cover [DataAnnotations](/aspnet/mvc/overview/older-versions/mvc-music-store/mvc-music-store-part-6) in the next tutorial.</span></span> <span data-ttu-id="7ce1b-109">[Display](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.metadata.displaymetadata) özniteliği bir alanın adı için (Bu durumda "ReleaseDate" yerine "Yayın tarihi") görüntüleneceğini belirtir.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-109">The [Display](/dotnet/api/microsoft.aspnetcore.mvc.modelbinding.metadata.displaymetadata) attribute specifies what to display for the name of a field (in this case "Release Date" instead of "ReleaseDate").</span></span> <span data-ttu-id="7ce1b-110">[DataType](/dotnet/api/microsoft.aspnetcore.mvc.dataannotations.internal.datatypeattributeadapter) özniteliği verilerin türünü belirtir (Tarih), bu nedenle alanda depolanan zaman bilgileri gösterilmez.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-110">The [DataType](/dotnet/api/microsoft.aspnetcore.mvc.dataannotations.internal.datatypeattributeadapter) attribute specifies the type of the data (Date), so the time information stored in the field isn't displayed.</span></span>

<span data-ttu-id="7ce1b-111">`[Column(TypeName = "decimal(18, 2)")]`Entity Framework Core veri ek açıklaması gerekir, bu nedenle `Price` veritabanında para birimiyle doğru şekilde eşleşebilirler.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-111">The `[Column(TypeName = "decimal(18, 2)")]` data annotation is required so Entity Framework Core can correctly map `Price` to currency in the database.</span></span> <span data-ttu-id="7ce1b-112">Daha fazla bilgi için bkz. [veri türleri](/ef/core/modeling/relational/data-types).</span><span class="sxs-lookup"><span data-stu-id="7ce1b-112">For more information, see [Data Types](/ef/core/modeling/relational/data-types).</span></span>

<span data-ttu-id="7ce1b-113">`Movies`Denetleyiciyi inceleyin ve hedef URL 'yi görmek için fare işaretçisini bir **düzenleme** bağlantısı üzerine tutun.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-113">Browse to the `Movies` controller and hold the mouse pointer over an **Edit** link to see the target URL.</span></span>

![Düzenleme bağlantısı üzerinde fare ile tarayıcı penceresi ve bağlantı URL 'Si https://localhost:5001/Movies/Edit/5 gösteriliyor](~/tutorials/first-mvc-app/controller-methods-views/_static/edit7.png)

<span data-ttu-id="7ce1b-115">**Düzenle** , **Ayrıntılar** ve **Sil** bağlantıları, *Görünümler/fılmler/Index. cshtml* dosyasındaki Core MVC bağlayıcı etiketi Yardımcısı tarafından oluşturulur.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-115">The **Edit** , **Details** , and **Delete** links are generated by the Core MVC Anchor Tag Helper in the *Views/Movies/Index.cshtml* file.</span></span>

[!code-cshtml[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Views/Movies/IndexOriginal.cshtml?highlight=1-3&range=46-50)]

<span data-ttu-id="7ce1b-116">[Etiket Yardımcıları](xref:mvc/views/tag-helpers/intro) , sunucu tarafı kodun dosyalarda HTML öğeleri oluşturma ve işlemeye katılmasını sağlar Razor .</span><span class="sxs-lookup"><span data-stu-id="7ce1b-116">[Tag Helpers](xref:mvc/views/tag-helpers/intro) enable server-side code to participate in creating and rendering HTML elements in Razor files.</span></span> <span data-ttu-id="7ce1b-117">Yukarıdaki kodda, `AnchorTagHelper` `href` denetleyici eylem yönteminden ve yol kimliğinden HTML özniteliği değeri dinamik olarak oluşturulur. En sevdiğiniz tarayıcıdan **Görünüm kaynağını** kullanıyorsunuz veya oluşturulan biçimlendirmeyi incelemek için geliştirici araçlarını kullanıyorsunuz.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-117">In the code above, the `AnchorTagHelper` dynamically generates the HTML `href` attribute value from the controller action method and route id. You use **View Source** from your favorite browser or use the developer tools to examine the generated markup.</span></span> <span data-ttu-id="7ce1b-118">Oluşturulan HTML 'nin bir bölümü aşağıda gösterilmiştir:</span><span class="sxs-lookup"><span data-stu-id="7ce1b-118">A portion of the generated HTML is shown below:</span></span>

```html
 <td>
    <a href="/Movies/Edit/4"> Edit </a> |
    <a href="/Movies/Details/4"> Details </a> |
    <a href="/Movies/Delete/4"> Delete </a>
</td>
```

<span data-ttu-id="7ce1b-119">*Startup.cs* dosyasındaki [yönlendirme](xref:mvc/controllers/routing) kümesi için biçimi geri çekin:</span><span class="sxs-lookup"><span data-stu-id="7ce1b-119">Recall the format for [routing](xref:mvc/controllers/routing) set in the *Startup.cs* file:</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie3/Startup.cs?name=snippet_1&highlight=5)]

<span data-ttu-id="7ce1b-120">ASP.NET Core, `https://localhost:5001/Movies/Edit/4` `Edit` denetleyicinin Action yöntemine `Movies` 4 parametresi ile dönüştürür `Id` .</span><span class="sxs-lookup"><span data-stu-id="7ce1b-120">ASP.NET Core translates `https://localhost:5001/Movies/Edit/4` into a request to the `Edit` action method of the `Movies` controller with the parameter `Id` of 4.</span></span> <span data-ttu-id="7ce1b-121">(Denetleyici yöntemleri de eylem yöntemleri olarak bilinir.)</span><span class="sxs-lookup"><span data-stu-id="7ce1b-121">(Controller methods are also known as action methods.)</span></span>

<span data-ttu-id="7ce1b-122">[Etiket yardımcıları](xref:mvc/views/tag-helpers/intro) ASP.NET Core ' deki en popüler yeni özelliklerden biridir.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-122">[Tag Helpers](xref:mvc/views/tag-helpers/intro) are one of the most popular new features in ASP.NET Core.</span></span> <span data-ttu-id="7ce1b-123">Daha fazla bilgi için bkz. [ek kaynaklar](#additional-resources).</span><span class="sxs-lookup"><span data-stu-id="7ce1b-123">For more information, see [Additional resources](#additional-resources).</span></span>

<a name="get-post"></a>

<span data-ttu-id="7ce1b-124">Denetleyiciyi açın `Movies` ve iki `Edit` eylem yöntemini inceleyin.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-124">Open the `Movies` controller and examine the two `Edit` action methods.</span></span> <span data-ttu-id="7ce1b-125">Aşağıdaki kod, `HTTP GET Edit` filmi getiren ve *Edit. cshtml* dosyası tarafından oluşturulan düzenleme formunu dolduran yöntemini gösterir Razor .</span><span class="sxs-lookup"><span data-stu-id="7ce1b-125">The following code shows the `HTTP GET Edit` method, which fetches the movie and populates the edit form generated by the *Edit.cshtml* Razor file.</span></span>

::: moniker range=">= aspnetcore-2.1"

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit1)]

<span data-ttu-id="7ce1b-126">Aşağıdaki kod, `HTTP POST Edit` postalanan film değerlerini işleyen yöntemini gösterir:</span><span class="sxs-lookup"><span data-stu-id="7ce1b-126">The following code shows the `HTTP POST Edit` method, which processes the posted movie values:</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2)]

::: moniker-end

::: moniker range="<= aspnetcore-2.0"

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit1)]

<span data-ttu-id="7ce1b-127">Aşağıdaki kod, `HTTP POST Edit` postalanan film değerlerini işleyen yöntemini gösterir:</span><span class="sxs-lookup"><span data-stu-id="7ce1b-127">The following code shows the `HTTP POST Edit` method, which processes the posted movie values:</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2)]

::: moniker-end

<span data-ttu-id="7ce1b-128">Özniteliği, daha `[Bind]` [fazla](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost)gönderim için bir yoldur.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-128">The `[Bind]` attribute is one way to protect against [over-posting](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application#overpost).</span></span> <span data-ttu-id="7ce1b-129">Yalnızca değiştirmek istediğiniz özniteliğe özellikler dahil etmelisiniz `[Bind]` .</span><span class="sxs-lookup"><span data-stu-id="7ce1b-129">You should only include properties in the `[Bind]` attribute that you want to change.</span></span> <span data-ttu-id="7ce1b-130">Daha fazla bilgi için, bkz. [denetleyicinizi yeniden gönderme durumundan koruma](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application).</span><span class="sxs-lookup"><span data-stu-id="7ce1b-130">For more information, see [Protect your controller from over-posting](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application).</span></span> <span data-ttu-id="7ce1b-131">[Viewmodeller](https://rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp-net-mvc-applications/) , daha fazla nakletmeyi engellemek için alternatif bir yaklaşım sağlar.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-131">[ViewModels](https://rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp-net-mvc-applications/) provide an alternative approach to prevent over-posting.</span></span>

<span data-ttu-id="7ce1b-132">İkinci `Edit` eylem yönteminin önünde özniteliği olduğuna dikkat edin `[HttpPost]` .</span><span class="sxs-lookup"><span data-stu-id="7ce1b-132">Notice the second `Edit` action method is preceded by the `[HttpPost]` attribute.</span></span>

::: moniker range=">= aspnetcore-2.1"

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit2&highlight=1)]

::: moniker-end

::: moniker range="<= aspnetcore-2.0"

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2&highlight=4)]

::: moniker-end

<span data-ttu-id="7ce1b-133">`HttpPost`Öznitelik, bu `Edit` yöntemin *yalnızca* istekler için çağrılabilecek olduğunu belirtir `POST` .</span><span class="sxs-lookup"><span data-stu-id="7ce1b-133">The `HttpPost` attribute specifies that this `Edit` method can be invoked *only* for `POST` requests.</span></span> <span data-ttu-id="7ce1b-134">`[HttpGet]`Özniteliği ilk düzenleme yöntemine uygulayabilirsiniz, ancak bu gerekli değildir çünkü `[HttpGet]` varsayılan.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-134">You could apply the `[HttpGet]` attribute to the first edit method, but that's not necessary because `[HttpGet]` is the default.</span></span>

<span data-ttu-id="7ce1b-135">`ValidateAntiForgeryToken`Özniteliği, [bir isteğin bir kısmını engellemek](xref:security/anti-request-forgery) için kullanılır ve düzenleme görünümü dosyasında ( *Görünümler/filmler/Düzenle. cshtml* ) oluşturulan bir güvenlik yumuşatma belirteci ile eşleştirilmiş olur.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-135">The `ValidateAntiForgeryToken` attribute is used to [prevent forgery of a request](xref:security/anti-request-forgery) and is paired up with an anti-forgery token generated in the edit view file ( *Views/Movies/Edit.cshtml* ).</span></span> <span data-ttu-id="7ce1b-136">Düzenleme görünümü dosyası, [form etiketi Yardımcısı](xref:mvc/views/working-with-forms)ile karşı koruma belirteci oluşturur.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-136">The edit view file generates the anti-forgery token with the [Form Tag Helper](xref:mvc/views/working-with-forms).</span></span>

[!code-cshtml[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Views/Movies/Edit.cshtml?range=9)]

<span data-ttu-id="7ce1b-137">[Form etiketi Yardımcısı](xref:mvc/views/working-with-forms) , `[ValidateAntiForgeryToken]` film denetleyicisi yönteminde üretilen Anti-forgery belirteciyle eşleşmesi gereken gizli bir Anti-forgery belirteci oluşturur `Edit` .</span><span class="sxs-lookup"><span data-stu-id="7ce1b-137">The [Form Tag Helper](xref:mvc/views/working-with-forms) generates a hidden anti-forgery token that must match the `[ValidateAntiForgeryToken]` generated anti-forgery token in the `Edit` method of the Movies controller.</span></span> <span data-ttu-id="7ce1b-138">Daha fazla bilgi için bkz. <xref:security/anti-request-forgery>.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-138">For more information, see <xref:security/anti-request-forgery>.</span></span>

<span data-ttu-id="7ce1b-139">`HttpGet Edit`Yöntemi, film parametresini alır `ID` , Entity Framework yöntemini kullanarak filmi arar `FindAsync` ve seçili filmi düzenleme görünümüne döndürür.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-139">The `HttpGet Edit` method takes the movie `ID` parameter, looks up the movie using the Entity Framework `FindAsync` method, and returns the selected movie to the Edit view.</span></span> <span data-ttu-id="7ce1b-140">Bir film bulunamazsa `NotFound` (HTTP 404) döndürülür.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-140">If a movie cannot be found, `NotFound` (HTTP 404) is returned.</span></span>

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit1)]

<span data-ttu-id="7ce1b-141">Scafkatlama sistemi düzenleme görünümü oluştururken, sınıfını ve `Movie` `<label>` `<input>` sınıfının her bir özelliği için işlenecek kodu ve öğelerini inceledi.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-141">When the scaffolding system created the Edit view, it examined the `Movie` class and created code to render `<label>` and `<input>` elements for each property of the class.</span></span> <span data-ttu-id="7ce1b-142">Aşağıdaki örnekte, Visual Studio scafkatlama sistemi tarafından oluşturulan düzenleme görünümü gösterilmektedir:</span><span class="sxs-lookup"><span data-stu-id="7ce1b-142">The following example shows the Edit view that was generated by the Visual Studio scaffolding system:</span></span>

[!code-cshtml[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie22/Views/Movies/EditOriginal.cshtml)]

<span data-ttu-id="7ce1b-143">Görünüm şablonunun dosyanın en üstünde bir ifadeye sahip olduğuna dikkat edin `@model MvcMovie.Models.Movie` .</span><span class="sxs-lookup"><span data-stu-id="7ce1b-143">Notice how the view template has a `@model MvcMovie.Models.Movie` statement at the top of the file.</span></span> <span data-ttu-id="7ce1b-144">`@model MvcMovie.Models.Movie` görünümün görünüm şablonu için modelin türü olmasını beklediğini belirtir `Movie` .</span><span class="sxs-lookup"><span data-stu-id="7ce1b-144">`@model MvcMovie.Models.Movie` specifies that the view expects the model for the view template to be of type `Movie`.</span></span>

<span data-ttu-id="7ce1b-145">Scafkatlanmış kod, HTML işaretlemesini kolaylaştırmak için birkaç etiket Yardımcısı yöntemi kullanır.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-145">The scaffolded code uses several Tag Helper methods to streamline the HTML markup.</span></span> <span data-ttu-id="7ce1b-146">[Etiket etiketi Yardımcısı](xref:mvc/views/working-with-forms) alanın adını ("title", "ReleaseDate", "tarz" veya "Price") görüntüler.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-146">The [Label Tag Helper](xref:mvc/views/working-with-forms) displays the name of the field ("Title", "ReleaseDate", "Genre", or "Price").</span></span> <span data-ttu-id="7ce1b-147">[Giriş etiketi Yardımcısı](xref:mvc/views/working-with-forms) bir HTML öğesi işler `<input>` .</span><span class="sxs-lookup"><span data-stu-id="7ce1b-147">The [Input Tag Helper](xref:mvc/views/working-with-forms) renders an HTML `<input>` element.</span></span> <span data-ttu-id="7ce1b-148">[Doğrulama etiketi Yardımcısı](xref:mvc/views/working-with-forms) , bu özellikle ilişkili tüm doğrulama iletilerini görüntüler.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-148">The [Validation Tag Helper](xref:mvc/views/working-with-forms) displays any validation messages associated with that property.</span></span>

<span data-ttu-id="7ce1b-149">Uygulamayı çalıştırın ve URL 'ye gidin `/Movies` .</span><span class="sxs-lookup"><span data-stu-id="7ce1b-149">Run the application and navigate to the `/Movies` URL.</span></span> <span data-ttu-id="7ce1b-150">Bir **düzenleme** bağlantısına tıklayın.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-150">Click an **Edit** link.</span></span> <span data-ttu-id="7ce1b-151">Tarayıcıda, sayfanın kaynağını görüntüleyin.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-151">In the browser, view the source for the page.</span></span> <span data-ttu-id="7ce1b-152">Öğesi için oluşturulan HTML `<form>` aşağıda gösterilmiştir.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-152">The generated HTML for the `<form>` element is shown below.</span></span>

[!code-HTML[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Views/Shared/edit_view_source.html?highlight=1,6,10,17,24,28)]

<span data-ttu-id="7ce1b-153">`<input>`Öğeleri `HTML <form>` `action` özniteliği URL 'ye gönderi olarak ayarlanan bir öğedir `/Movies/Edit/id` .</span><span class="sxs-lookup"><span data-stu-id="7ce1b-153">The `<input>` elements are in an `HTML <form>` element whose `action` attribute is set to post to the `/Movies/Edit/id` URL.</span></span> <span data-ttu-id="7ce1b-154">Düğme tıklandığında form verileri sunucuya gönderilir `Save` .</span><span class="sxs-lookup"><span data-stu-id="7ce1b-154">The form data will be posted to the server when the `Save` button is clicked.</span></span> <span data-ttu-id="7ce1b-155">Kapanış öğesinden önceki son satır, `</form>` [form etiketi Yardımcısı](xref:mvc/views/working-with-forms)tarafından oluşturulan gizli [XSRF](xref:security/anti-request-forgery) belirtecini gösterir.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-155">The last line before the closing `</form>` element shows the hidden [XSRF](xref:security/anti-request-forgery) token generated by the [Form Tag Helper](xref:mvc/views/working-with-forms).</span></span>

## <a name="processing-the-post-request"></a><span data-ttu-id="7ce1b-156">POST Isteği işleniyor</span><span class="sxs-lookup"><span data-stu-id="7ce1b-156">Processing the POST Request</span></span>

<span data-ttu-id="7ce1b-157">Aşağıdaki listede `[HttpPost]` `Edit` eylem yönteminin sürümü gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-157">The following listing shows the `[HttpPost]` version of the `Edit` action method.</span></span>

::: moniker range=">= aspnetcore-2.1"

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie21/Controllers/MC1.cs?name=snippet_edit2)]

::: moniker-end

::: moniker range="<= aspnetcore-2.0"

[!code-csharp[](~/tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/MC1.cs?name=snippet_edit2)]

::: moniker-end

<span data-ttu-id="7ce1b-158">`[ValidateAntiForgeryToken]`Öznitelik, [form etiketi Yardımcısı](xref:mvc/views/working-with-forms) 'nda Anti-forgery belirteç Oluşturucu tarafından oluşturulan gizli [XSRF](xref:security/anti-request-forgery) belirtecini doğrular</span><span class="sxs-lookup"><span data-stu-id="7ce1b-158">The `[ValidateAntiForgeryToken]` attribute validates the hidden [XSRF](xref:security/anti-request-forgery) token generated by the anti-forgery token generator in the [Form Tag Helper](xref:mvc/views/working-with-forms)</span></span>

<span data-ttu-id="7ce1b-159">[Model bağlama](xref:mvc/models/model-binding) sistemi, postalanan form değerlerini alır ve `Movie` parametresi olarak geçirilmiş bir nesne oluşturur `movie` .</span><span class="sxs-lookup"><span data-stu-id="7ce1b-159">The [model binding](xref:mvc/models/model-binding) system takes the posted form values and creates a `Movie` object that's passed as the `movie` parameter.</span></span> <span data-ttu-id="7ce1b-160">`ModelState.IsValid`Özelliği, formda gönderilen verilerin bir nesneyi değiştirmek (düzenlemek veya güncelleştirmek) için kullanılabileceğini doğrular `Movie` .</span><span class="sxs-lookup"><span data-stu-id="7ce1b-160">The `ModelState.IsValid` property verifies that the data submitted in the form can be used to modify (edit or update) a `Movie` object.</span></span> <span data-ttu-id="7ce1b-161">Veriler geçerliyse, kaydedilir.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-161">If the data is valid, it's saved.</span></span> <span data-ttu-id="7ce1b-162">Güncelleştirilmiş (düzenlenmiş) film verileri veritabanı bağlamı yöntemine çağrı yaparak veritabanına kaydedilir `SaveChangesAsync` .</span><span class="sxs-lookup"><span data-stu-id="7ce1b-162">The updated (edited) movie data is saved to the database by calling the `SaveChangesAsync` method of database context.</span></span> <span data-ttu-id="7ce1b-163">Veriler kaydedildikten sonra kod, kullanıcıyı, `Index` `MoviesController` Yeni yapılan değişiklikler dahil olmak üzere, film koleksiyonunu görüntüleyen sınıfının Action yöntemine yönlendirir.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-163">After saving the data, the code redirects the user to the `Index` action method of the `MoviesController` class, which displays the movie collection, including the changes just made.</span></span>

<span data-ttu-id="7ce1b-164">Form sunucuya gönderilmeden önce, istemci tarafı doğrulaması alanlarda tüm doğrulama kurallarını denetler.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-164">Before the form is posted to the server, client-side validation checks any validation rules on the fields.</span></span> <span data-ttu-id="7ce1b-165">Herhangi bir doğrulama hatası varsa, bir hata iletisi görüntülenir ve form nakledilmez.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-165">If there are any validation errors, an error message is displayed and the form isn't posted.</span></span> <span data-ttu-id="7ce1b-166">JavaScript devre dışıysa, istemci tarafı doğrulamaya sahip olmayacaktır, ancak sunucu geçerli olmayan gönderilen değerleri tespit eder ve form değerleri hata iletileriyle birlikte görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-166">If JavaScript is disabled, you won't have client-side validation but the server will detect the posted values that are not valid, and the form values will be redisplayed with error messages.</span></span> <span data-ttu-id="7ce1b-167">Öğreticide daha sonra [model doğrulamayı](xref:mvc/models/validation) daha ayrıntılı bir şekilde inceleyeceğiz.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-167">Later in the tutorial we examine [Model Validation](xref:mvc/models/validation) in more detail.</span></span> <span data-ttu-id="7ce1b-168">*Görünümler/filmler/Edit. cshtml* görünüm şablonundaki [doğrulama etiketi Yardımcısı](xref:mvc/views/working-with-forms) , uygun hata iletilerini görüntülemeyi üstlenir.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-168">The [Validation Tag Helper](xref:mvc/views/working-with-forms) in the *Views/Movies/Edit.cshtml* view template takes care of displaying appropriate error messages.</span></span>

![Görünümü Düzenle: ABC durumlarının yanlış bir fiyat değeri için bir özel durum, alan fiyatının bir sayı olması gerektiğini belirtir.](~/tutorials/first-mvc-app/controller-methods-views/_static/val.png)

<span data-ttu-id="7ce1b-171">`HttpGet`Film denetleyicisindeki tüm yöntemler benzer bir düzene uyar.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-171">All the `HttpGet` methods in the movie controller follow a similar pattern.</span></span> <span data-ttu-id="7ce1b-172">Bir film nesnesi (veya bunun durumunda nesne listesi `Index` ) alır ve nesneyi (model) görünüme iletir.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-172">They get a movie object (or list of objects, in the case of `Index`), and pass the object (model) to the view.</span></span> <span data-ttu-id="7ce1b-173">`Create`Yöntemi, görünüme boş bir film nesnesi geçirir `Create` .</span><span class="sxs-lookup"><span data-stu-id="7ce1b-173">The `Create` method passes an empty movie object to the `Create` view.</span></span> <span data-ttu-id="7ce1b-174">Verileri oluşturan, düzenleme, silme veya başka bir şekilde değiştiren tüm yöntemler `[HttpPost]` , yönteminin aşırı yüküne neden olacak.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-174">All the methods that create, edit, delete, or otherwise modify data do so in the `[HttpPost]` overload of the method.</span></span> <span data-ttu-id="7ce1b-175">Bir yöntemde verileri değiştirme `HTTP GET` bir güvenlik riskidir.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-175">Modifying data in an `HTTP GET` method is a security risk.</span></span> <span data-ttu-id="7ce1b-176">Bir yöntemde verileri değiştirmek `HTTP GET` , http en iyi uygulamalarını ve bu da GET isteklerinin uygulamanızın durumunu değiştirmemesi gerektiğini belirten mimari [rest](http://rest.elkstein.org/) modelini ihlal ediyor.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-176">Modifying data in an `HTTP GET` method also violates HTTP best practices and the architectural [REST](http://rest.elkstein.org/) pattern, which specifies that GET requests shouldn't change the state of your application.</span></span> <span data-ttu-id="7ce1b-177">Diğer bir deyişle, bir GET işleminin gerçekleştirilmesi, yan etkileri olmayan ve kalıcı verilerinizi değiştirmeyen bir güvenli işlem olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="7ce1b-177">In other words, performing a GET operation should be a safe operation that has no side effects and doesn't modify your persisted data.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="7ce1b-178">Ek kaynaklar</span><span class="sxs-lookup"><span data-stu-id="7ce1b-178">Additional resources</span></span>

* [<span data-ttu-id="7ce1b-179">Genelleştirme ve yerelleştirme</span><span class="sxs-lookup"><span data-stu-id="7ce1b-179">Globalization and localization</span></span>](xref:fundamentals/localization)
* [<span data-ttu-id="7ce1b-180">Etiket yardımcılarına giriş</span><span class="sxs-lookup"><span data-stu-id="7ce1b-180">Introduction to Tag Helpers</span></span>](xref:mvc/views/tag-helpers/intro)
* [<span data-ttu-id="7ce1b-181">Yazar etiketi yardımcıları</span><span class="sxs-lookup"><span data-stu-id="7ce1b-181">Author Tag Helpers</span></span>](xref:mvc/views/tag-helpers/authoring)
* <xref:security/anti-request-forgery>
* <span data-ttu-id="7ce1b-182">Denetleyicinizi [yeniden gönderme](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application) durumundan koruma</span><span class="sxs-lookup"><span data-stu-id="7ce1b-182">Protect your controller from [over-posting](/aspnet/mvc/overview/getting-started/getting-started-with-ef-using-mvc/implementing-basic-crud-functionality-with-the-entity-framework-in-asp-net-mvc-application)</span></span>
* [<span data-ttu-id="7ce1b-183">ViewModel 'lar</span><span class="sxs-lookup"><span data-stu-id="7ce1b-183">ViewModels</span></span>](https://rachelappel.com/use-viewmodels-to-manage-data-amp-organize-code-in-asp-net-mvc-applications/)
* [<span data-ttu-id="7ce1b-184">Form Etiketi Yardımcısı</span><span class="sxs-lookup"><span data-stu-id="7ce1b-184">Form Tag Helper</span></span>](xref:mvc/views/working-with-forms)
* [<span data-ttu-id="7ce1b-185">Giriş Etiketi Yardımcısı</span><span class="sxs-lookup"><span data-stu-id="7ce1b-185">Input Tag Helper</span></span>](xref:mvc/views/working-with-forms)
* [<span data-ttu-id="7ce1b-186">Etiket Etiketi Yardımcısı</span><span class="sxs-lookup"><span data-stu-id="7ce1b-186">Label Tag Helper</span></span>](xref:mvc/views/working-with-forms)
* [<span data-ttu-id="7ce1b-187">Seçim Etiketi Yardımcısı</span><span class="sxs-lookup"><span data-stu-id="7ce1b-187">Select Tag Helper</span></span>](xref:mvc/views/working-with-forms)
* [<span data-ttu-id="7ce1b-188">Doğrulama etiketi Yardımcısı</span><span class="sxs-lookup"><span data-stu-id="7ce1b-188">Validation Tag Helper</span></span>](xref:mvc/views/working-with-forms)

> [!div class="step-by-step"]
> <span data-ttu-id="7ce1b-189">[Önceki](working-with-sql.md) 
>  [Sonraki](search.md)</span><span class="sxs-lookup"><span data-stu-id="7ce1b-189">[Previous](working-with-sql.md)
[Next](search.md)</span></span>  
